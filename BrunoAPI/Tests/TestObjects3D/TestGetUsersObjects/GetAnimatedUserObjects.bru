meta {
  name: GetAnimatedUserObjects
  type: http
  seq: 4
}

get {
  url: {{local}}:3000/api/v1/objects3D/private?animated=true
  body: none
  auth: inherit
}

params:query {
  animated: true
}

assert {
  res.status: eq 200
}

tests {
  test("should return only animated user objects", function () {
    let res_objects = res.getBody().data.result.objects;
    let is_static = false;
    for(let obj of res_objects){
      if(!obj.isAnimated){
        is_static = true;
        break;
      }
    }
    let other_user = false;
    for(let obj of res_objects){
      if(obj.username !== "Test_Account"){
        other_user = true;
        break;
      }
    }
    
    expect(is_static || other_user).to.be.false;
  });
}

settings {
  encodeUrl: true
}
